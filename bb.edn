;; bb.edn
{:tasks
 {test:all
  (let [apps ["basic-chat-demo"
              "nlp-interface"
              "api"
              "open-world-ingest"
              "common"
              "graph-memory"]]
    (doseq [a apps]
      (println "â†’ Testing" a)
      ;; run inside each app so its :test alias + deps are respected
      (shell {:dir (str "apps/" a)}
             "clojure -M:test -m cognitect.test-runner -d test")))

  lint (shell "clj-kondo --lint apps libs")
  demo (shell "cd apps/basic-chat-demo && clojure -M:run-m -- --protocol basic-chat/v5 --fh")}}
